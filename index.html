<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veo3 & Sora2 Prompt Gener√°tor</title>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; --card: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: #334155; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .card { background: var(--card); padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1 { color: #1e293b; text-align: center; margin-bottom: 30px; }
        h2 { font-size: 1.2rem; margin-top: 0; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; color: #475569; }
        input[type="text"], textarea, select { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; margin-bottom: 15px; box-sizing: border-box; font-size: 16px; }
        textarea { height: 100px; resize: vertical; }
        
        .checkbox-group { display: flex; align-items: center; margin-bottom: 15px; background: #f1f5f9; padding: 10px; border-radius: 6px; }
        .checkbox-group input[type="checkbox"] { margin-right: 10px; width: 20px; height: 20px; }
        .checkbox-group label { margin: 0; cursor: pointer; flex-grow: 1; }
        
        .hidden { display: none; }
        .sub-options { margin-left: 30px; margin-bottom: 15px; padding-left: 10px; border-left: 3px solid var(--primary); }
        
        button { background-color: var(--primary); color: white; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; border-radius: 8px; cursor: pointer; width: 100%; transition: background 0.2s; }
        button:hover { background-color: #1d4ed8; }
        button:disabled { background-color: #94a3b8; cursor: not-allowed; }

        .api-box { background: #fffbeb; border: 1px solid #fcd34d; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 0.9em; }
        #resultArea { background: #1e293b; color: #10b981; font-family: monospace; padding: 20px; border-radius: 8px; white-space: pre-wrap; margin-top: 20px; display: none; }
        .tabs { display: flex; margin-bottom: 20px; border-bottom: 2px solid #e2e8f0; }
        .tab { padding: 10px 20px; cursor: pointer; font-weight: bold; color: #64748b; }
        .tab.active { color: var(--primary); border-bottom: 3px solid var(--primary); margin-bottom: -2px; }
    </style>
</head>
<body>

<div class="container">
    <h1>üé¨ AI Video Prompt Mester</h1>
    
    <div class="api-box">
        <label for="apiKey">OpenAI API Kulcs (sz√ºks√©ges a "gondolkod√°shoz"):</label>
        <input type="password" id="apiKey" placeholder="sk-..." style="margin-bottom: 0;">
        <small>A kulcsot csak a b√∂ng√©sz≈ëd t√°rolja ideiglenesen, nem ker√ºl ment√©sre szerveren.</small>
    </div>

    <div class="card">
        <label for="modelSelect">C√©lplatform:</label>
        <select id="modelSelect">
            <option value="veo3">Google Veo 3 (Filmszer≈±bb, realisztikus)</option>
            <option value="sora2">OpenAI Sora 2 (Kreat√≠vabb, dinamikusabb)</option>
        </select>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('specific')">Konkr√©t Jelenet</div>
            <div class="tab" onclick="switchTab('idea')">√ñtletgener√°tor</div>
        </div>

        <!-- KONKR√âT M√ìD -->
        <div id="specificMode">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div>
                    <label>Ki? (Szerepl≈ë)</label>
                    <input type="text" id="inputWho" placeholder="Pl. Egy id≈ës magyar ≈±rhaj√≥s">
                </div>
                <div>
                    <label>Mikor? (Napszak/Kor)</label>
                    <input type="text" id="inputWhen" placeholder="Pl. Naplemente, 2080-ban">
                </div>
            </div>
            <label>Hol? (Helysz√≠n)</label>
            <input type="text" id="inputWhere" placeholder="Pl. A Balaton kisz√°radt medr√©ben">
            
            <label>Mit csin√°l? (Cselekm√©ny)</label>
            <textarea id="inputAction" placeholder="Pl. Megtal√°l egy r√©gi vide√≥kazett√°t √©s s√≠rva fakad..."></textarea>
        </div>

        <!-- √ñTLET M√ìD -->
        <div id="ideaMode" class="hidden">
            <label>Mir≈ël legyen sz√≥ nagyj√°b√≥l? (Hagyd √ºresen a teljes meglepet√©shez)</label>
            <textarea id="ideaInput" placeholder="Pl. Valami sci-fi Budapesten, vagy egy horror a Hortob√°gyon..."></textarea>
        </div>

        <h2>Be√°ll√≠t√°sok (Audio & Hangulat)</h2>

        <!-- ZENE -->
        <div class="checkbox-group">
            <input type="checkbox" id="chkMusic" onchange="toggleSub('optMusic')">
            <label for="chkMusic">üéµ Legyen Zene?</label>
        </div>
        <div id="optMusic" class="sub-options hidden">
            <label>Milyen zene?</label>
            <input type="text" id="descMusic" placeholder="Pl. Dr√°mai heged≈±sz√≥, lass√∫ temp√≥">
        </div>

        <!-- BESZ√âD -->
        <div class="checkbox-group">
            <input type="checkbox" id="chkSpeech" onchange="toggleSub('optSpeech')">
            <label for="chkSpeech">üó£Ô∏è Legyen Besz√©d?</label>
        </div>
        <div id="optSpeech" class="sub-options hidden">
            <label>Besz√©d nyelve:</label>
            <select id="langSpeech">
                <option value="Hungarian">Magyar</option>
                <option value="English">Angol</option>
            </select>
            <label style="margin-top:10px;">Mir≈ël besz√©ljenek? (Vagy konkr√©t sz√∂veg)</label>
            <textarea id="descSpeech" style="height:60px;" placeholder="Pl. Mondja azt: 'Soha nem hittem volna, hogy visszat√©rek.'"></textarea>
        </div>

        <!-- ATMOSZF√âRA -->
        <div class="checkbox-group">
            <input type="checkbox" id="chkAtmos" onchange="toggleSub('optAtmos')">
            <label for="chkAtmos">‚ú® Atmoszf√©ra / Effektek</label>
        </div>
        <div id="optAtmos" class="sub-options hidden">
            <label>Milyen legyen a hangulat?</label>
            <input type="text" id="descAtmos" placeholder="Pl. K√∂d√∂s, neonf√©nyes, 35mm film hat√°s">
        </div>

        <button id="btnGenerate" onclick="generatePrompt()">üöÄ Prompt Gener√°l√°sa</button>
    </div>

    <div id="resultArea"></div>
</div>

<script>
    let currentMode = 'specific';

    function switchTab(mode) {
        currentMode = mode;
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');
        if(mode === 'specific') {
            document.getElementById('specificMode').classList.remove('hidden');
            document.getElementById('ideaMode').classList.add('hidden');
        } else {
            document.getElementById('specificMode').classList.add('hidden');
            document.getElementById('ideaMode').classList.remove('hidden');
        }
    }

    function toggleSub(id) {
        const el = document.getElementById(id);
        el.classList.toggle('hidden');
    }

    async function generatePrompt() {
        const apiKey = document.getElementById('apiKey').value;
        if (!apiKey) { alert("K√©rlek add meg az OpenAI API kulcsodat!"); return; }

        const btn = document.getElementById('btnGenerate');
        const resultArea = document.getElementById('resultArea');
        
        btn.disabled = true;
        btn.innerText = "Gener√°l√°s folyamatban...";
        resultArea.style.display = 'none';
        resultArea.innerText = "";

        // Adatok √∂sszegy≈±jt√©se
        const model = document.getElementById('modelSelect').value;
        const hasMusic = document.getElementById('chkMusic').checked;
        const musicDesc = document.getElementById('descMusic').value;
        const hasSpeech = document.getElementById('chkSpeech').checked;
        const speechLang = document.getElementById('langSpeech').value;
        const speechDesc = document.getElementById('descSpeech').value;
        const hasAtmos = document.getElementById('chkAtmos').checked;
        const atmosDesc = document.getElementById('descAtmos').value;

        let userContent = "";

        if (currentMode === 'specific') {
            userContent = `
            K√©sz√≠ts egy video promptot a k√∂vetkez≈ë adatok alapj√°n:
            - Modell: ${model}
            - Szerepl≈ë: ${document.getElementById('inputWho').value}
            - Id≈ë: ${document.getElementById('inputWhen').value}
            - Helysz√≠n: ${document.getElementById('inputWhere').value}
            - Cselekm√©ny: ${document.getElementById('inputAction').value}
            `;
        } else {
            userContent = `
            Tal√°lj ki egy kreat√≠v video √∂tletet a k√∂vetkez≈ë alapj√°n (ha √ºres, tal√°lj ki valamit): "${document.getElementById('ideaInput').value}".
            Modell: ${model}
            `;
        }

        // Audio √©s Tech instrukci√≥k hozz√°ad√°sa
        userContent += `
        \nTECHNIKAI R√âSZLETEK:
        - Zene: ${hasMusic ? (musicDesc || "Illeszkedjen a hangulathoz") : "Nincs zene (Silent)"}
        - Besz√©d: ${hasSpeech ? (speechDesc || "A szerepl≈ëk besz√©lnek") + " (Nyelv: " + speechLang + ")" : "Nincs besz√©d"}
        - Atmoszf√©ra/Effektek: ${hasAtmos ? atmosDesc : "Standard filmes kin√©zet"}
        `;

        const systemPrompt = `
        Te egy profi 'Prompt Engineer' vagy, aki a Google Veo √©s OpenAI Sora modellekhez √≠r t√∂k√©letes utas√≠t√°sokat.
        
        FELADAT:
        1. √ârtelmezd a felhaszn√°l√≥ magyar le√≠r√°s√°t.
        2. Ha "√ñtletgener√°tor" m√≥dban vagyunk √©s kev√©s az inf√≥, tal√°lj ki egy leny≈±g√∂z≈ë, vizu√°lis koncepci√≥t.
        3. Ford√≠tsd le a VIZU√ÅLIS le√≠r√°st r√©szletes, filmszer≈± ANGOL nyelvre (mert a modellek ezt √©rtik jobban). Haszn√°lj szakszavakat (pl. "cinematic lighting", "4k", "dolly shot").
        4. A BESZ√âD/DIAL√ìGUS tartalm√°t NE ford√≠tsd le, ha a k√©rt nyelv magyar! A promptban egy√©rtelm≈±en jel√∂ld: "Character speaks in Hungarian: '[Sz√∂veg]'".
        5. A kimenet csak a k√©sz prompt legyen, semmi m√°s magyar√°zat.

        FORM√ÅTUM (Ezt k√∂vesd):
        [Cinematic Style & Camera Angle] + [Detailed Visual Description of Subject & Action in English] + [Lighting & Atmosphere in English] + --audio [Music/SFX description in English] + --speech [Language: Hungarian, Content: "Id√©zett sz√∂veg"]
        `;

        try {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-4o-mini", // Gyors √©s olcs√≥
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: userContent }
                    ],
                    temperature: 0.7
                })
            });

            const data = await response.json();
            
            if (data.error) {
                throw new Error(data.error.message);
            }

            resultArea.style.display = 'block';
            resultArea.innerText = data.choices[0].message.content;

        } catch (error) {
            alert("Hiba t√∂rt√©nt: " + error.message);
        } finally {
            btn.disabled = false;
            btn.innerText = "üöÄ Prompt Gener√°l√°sa";
        }
    }
</script>

</body>
</html>
